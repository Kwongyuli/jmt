<style>
    #img {
        width: 200px;
    }
</style>

ì§ˆë¬¸ ìƒì„¸ í˜ì´ì§€ ì…ë‹ˆë‹¤.

<body>
    ëª‡ë²ˆì§¸ ê¸€ <br> <br> ì‘ì„±ì <br> <br>

    <!-- ì œëª© -->
    <div class="mb-3">
        <label for="title">ì œëª©:</label>
        <input type="text" class="form-control" id="title" name="title" th:value="${question.title}">
    </div>
    <h5>ë‚´ìš©: </h5>
    <!-- ë‚´ìš© -->
    <div th:text="${question.content}"></div>
    <!-- ì‚¬ì§„ -->
    <div>
        <img id="img" th:each="fileInfo : ${question.qFileInfos}" th:src="@{|/down?fileId=${fileInfo.id}|}">
    </div>

    <!--ì¶”ì²œ ë¹„ì¶”ì²œ-->
    <div>
        <form id="voteForm" method="post">
            <button type="button" id="upvotes" th:text="'ì¶”ì²œğŸ‘ ' + ${upvotes}" onclick="upvote()"></button>
            <button type="button" id="downvotes" th:text="'ë¹„ì¶”ì²œğŸ‘ ' + ${downvotes}" onclick="downvote()"></button>
        </form>
    </div>

    <!-- ëª©ë¡ -->
    <a class="nav-link" th:href="@{|/question/list|}" id="list">ëª©ë¡</a>

    <br>

    <!-- ì§ˆë¬¸ ìˆ˜ì • -->
    <a class="nav-link" th:href="@{|/question/edit/${question.id}|}" id="edit">ìˆ˜ì •</a>

    <br>

    <!-- ì§ˆë¬¸ ì‚­ì œ -->
    <a class="nav-link" href="#" id="delete" th:num="${question.id}">ì‚­ì œ</a>

    <form th:action="@{|/question/${question.id}|}" method="post" class="my-3">
        <textarea name="text" class="form-control" rows="10"></textarea>
        <input type="submit" value="ë‹µë³€ë“±ë¡" class="btn btn-primary my-2">
    </form>

    <!-- ë‹µë³€ ë³´ì´ê²Œí•˜ê¸° & ë‹µë³€ì‘ì„±ëœ ì‹œê°„ (ìˆ˜ì •ë˜ë©´ ìˆ˜ì •ëœ ì‹œê°„ìœ¼ë¡œ ë³€ê²½ì‹œí‚´ {ê³ ê°ì˜ ì†Œë¦¬ì— ëŒ€í•œ ë‹µë³€ì´ì—¬ì„œ}) & ì‚­ì œ & ìˆ˜ì • -->
    <div th:each="answer : ${question.answers}">
        <div th:text="${answer.text}"></div>
        <div th:text="${#temporals.format(answer.createdAt, 'yyyy.MM.dd HH:mm')}"></div>
        <a class="nav-link delete-answer" href="#" th:attr="data-id=${answer.id},data-qid=${question.id}">ë‹µë³€ ì‚­ì œ</a>
        <!-- <a class="nav-link" th:href="@{|/answer/edit/${answer.id}|}" id="edit">ë‹µë³€ ìˆ˜ì •</a> -->
    </div>
</body>

<script>
    // ì§ˆë¬¸ ì‚­ì œ
    document.querySelector('#delete').addEventListener('click', (e) => {
        e.preventDefault();
        if (confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            const num = e.target.getAttribute('num');
            location = `/question/delete/${num}`;
        }
    });

    // ë‹µë³€ ì‚­ì œ
    document.querySelectorAll('.delete-answer').forEach(button => {
        button.addEventListener('click', (e) => {
            e.preventDefault();
            if (confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                const id = e.target.getAttribute('data-id');
                const qId = e.target.getAttribute('data-qid');
                location = `/answer/delete/${id}/${qId}`;
            }
        });
    });

    // ì¶”ì²œ ë¹„ì¶”ì²œ 
    function upvote() {
        document.getElementById("voteForm").action = '/question/' + [[${ question.id }]] + '/vote?vote=true';
        document.getElementById("voteForm").submit();
    }

    function downvote() {
        document.getElementById("voteForm").action = '/question/' + [[${ question.id }]] + '/vote?vote=false';
        document.getElementById("voteForm").submit();
    }
</script>